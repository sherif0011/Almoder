<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ØªÙØ§ØµÙŠÙ„ Ø­Ø¬Ø²Ùƒ | PlayZone</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">
    <style>body { font-family: 'Cairo', sans-serif; }</style>
</head>
<body class="bg-gray-100 p-6">
    <div class="max-w-2xl mx-auto">
        <div class="flex justify-between items-center mb-8 bg-white p-5 rounded-3xl shadow-sm border-r-8 border-yellow-500">
            <h1 class="text-xl font-bold">ğŸ—“ï¸ Ø­Ø¬ÙˆØ²Ø§ØªÙŠ Ø§Ù„Ø´Ø®ØµÙŠØ©</h1>
            <a href="index.html" class="bg-blue-600 text-white px-5 py-2 rounded-xl font-bold shadow-md">Ø¹ÙˆØ¯Ø©</a>
        </div>
        <div id="list" class="space-y-4">
            <p class="text-center py-10 text-gray-400">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
        </div>
    </div>
    <script>
        const SUPABASE_URL = 'https://pfepcvvccgcznshqulhz.supabase.co'; 
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBmZXBjdnZjY2djem5zaHF1bGh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg4NjQxNjQsImV4cCI6MjA4NDQ0MDE2NH0.olTCdMWYUZ-TSzucoETKTVwBSiIPjX4U2UfbVGQbgfw';
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        async function load() {
            const list = document.getElementById('list');
            const phone = localStorage.getItem('myPlayZonePhone');
            if (!phone) { list.innerHTML = '<p class="text-center p-10 bg-white rounded-3xl">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø³Ø¬Ù„Ø©.</p>'; return; }

            const { data } = await supabaseClient.from('bookings').select('*').eq('phone', phone).order('created_at', {ascending: false});
            if (data && data.length > 0) {
                list.innerHTML = '';
                data.forEach(b => {
                    list.innerHTML += `<div class="bg-white p-6 rounded-3xl shadow-lg border-r-8 border-blue-600">
                        <h3 class="text-xl font-bold text-blue-800">${b.console}</h3>
                        <p class="mt-2">Ø§Ù„Ù…ÙˆØ¹Ø¯: <span class="font-bold text-blue-600">${b.time}</span></p>
                        <p>Ø§Ù„ØªØ§Ø±ÙŠØ®: <span class="font-bold">${b.date}</span></p>
                    </div>`;
                });
            } else { list.innerHTML = '<p class="text-center p-10 bg-white rounded-3xl">Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø­Ø¬Ø².</p>'; }
        }
        load();
    </script>
</body>
</html>